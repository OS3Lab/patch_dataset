if command -v gn &> /dev/null; then
    echo " "
else
    if [ ! -d "depot_tools" ]; then
        git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
    fi
    export PATH="$PATH:$(pwd)/depot_tools"
fi
gclient sync -D
gn gen out/asan --args='is_debug=true is_asan=true is_clang=true'
ninja -C out/asan d8 --quiet 2>&1 | tee /dev/stderr
ninja_exit_code=${PIPESTATUS[0]}  # 捕获 ninja 命令的退出状态
exit $ninja_exit_code  # 返回 ninja 的退出状态